<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å¯Œç¿åœ°å›¾ç”Ÿæˆå™¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #ffd700;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
        }
        .main {
            display: flex;
            gap: 20px;
        }
        .input-section, .output-section {
            flex: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
        }
        h2 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 18px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
        }
        textarea {
            width: 100%;
            height: 400px;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: monospace;
            font-size: 13px;
            resize: vertical;
        }
        .format-hint {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #aaa;
        }
        .format-hint code {
            color: #22c55e;
        }
        button {
            padding: 12px 25px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #ffd700, #ffed4a);
            color: #1a1a2e;
            font-weight: bold;
        }
        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: #fff;
        }
        .output-code {
            background: #0d1117;
            color: #c9d1d9;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
        }
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(11, 1fr);
            gap: 2px;
            margin-top: 15px;
        }
        .preview-tile {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            text-align: center;
            padding: 2px;
            position: relative;
        }
        .preview-tile.corner { background: rgba(255,215,0,0.2); }
        .preview-tile .color-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            border-radius: 4px 4px 0 0;
        }
        .color-brown { background: #8B4513; }
        .color-lightblue { background: #87CEEB; }
        .color-pink { background: #FF69B4; }
        .color-orange { background: #FFA500; }
        .color-red { background: #FF0000; }
        .color-yellow { background: #FFFF00; }
        .color-green { background: #228B22; }
        .color-blue { background: #0000CD; }
        .color-railroad { background: #333; }
        .color-utility { background: #666; }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .tab {
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            cursor: pointer;
        }
        .tab.active {
            background: #ffd700;
            color: #1a1a2e;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ² å¤§å¯Œç¿åœ°å›¾ç”Ÿæˆå™¨</h1>
        <p class="subtitle">è¾“å…¥åœ°åï¼Œè‡ªåŠ¨ç”Ÿæˆåœ°å›¾é…ç½®</p>
        
        <div class="main">
            <div class="input-section">
                <h2>ğŸ“ è¾“å…¥</h2>
                
                <div class="input-group">
                    <label>åŸå¸‚IDï¼ˆè‹±æ–‡ï¼Œç”¨äºä»£ç ï¼‰</label>
                    <input type="text" id="cityId" value="custom" placeholder="ä¾‹å¦‚: newyork">
                </div>
                
                <div class="input-group">
                    <label>åŸå¸‚åç§°</label>
                    <input type="text" id="cityName" value="è‡ªå®šä¹‰åŸå¸‚" placeholder="ä¾‹å¦‚: çº½çº¦">
                </div>
                
                <div class="input-group">
                    <label>å›½æ—— Emoji</label>
                    <input type="text" id="cityFlag" value="ğŸ™ï¸" placeholder="ä¾‹å¦‚: ğŸ‡ºğŸ‡¸">
                </div>
                
                <div class="input-group">
                    <label>è´§å¸ç¬¦å·</label>
                    <input type="text" id="currency" value="$" placeholder="ä¾‹å¦‚: $ æˆ– Â¥">
                </div>
                
                <div class="format-hint">
                    <strong>æ ¼å¼è¯´æ˜ï¼š</strong><br>
                    æ¯è¡Œä¸€ä¸ªåœ°äº§ï¼Œæ ¼å¼ï¼š<code>ä½ç½®.åœ°å</code><br><br>
                    <strong>ä½ç½®å¯¹ç…§ï¼š</strong><br>
                    â€¢ è¡—é“: 1,3 | 6,8,9 | 11,13,14 | 16,18,19 | 21,23,24 | 26,27,29 | 31,32,34 | 37,39<br>
                    â€¢ ç«è½¦ç«™: 5, 15, 25, 35<br>
                    â€¢ å…¬ç”¨äº‹ä¸š: 12(ç”µ), 28(æ°´)<br><br>
                    <strong>ç¤ºä¾‹ï¼š</strong><br>
                    <code>1.å·´åé²æ—¥</code><br>
                    <code>3.æ–°å¥¥å°”è‰¯</code><br>
                    <code>5.æ–°å¥¥å°”è‰¯ç«™</code><br>
                    <code>12.å—æ–¹ç”µåŠ›</code>
                </div>
                
                <div class="input-group">
                    <label>åœ°äº§åˆ—è¡¨</label>
                    <textarea id="propertyInput" placeholder="1.åœ°å1
3.åœ°å2
5.ç«è½¦ç«™å
6.åœ°å3
..."></textarea>
                </div>
                
                <button class="btn-primary" onclick="generate()">ğŸš€ ç”Ÿæˆé…ç½®</button>
                <button class="btn-secondary" onclick="loadExample()">ğŸ“‹ åŠ è½½ç¤ºä¾‹</button>
            </div>
            
            <div class="output-section">
                <h2>ğŸ“¦ è¾“å‡º</h2>
                
                <div class="tabs">
                    <div class="tab active" onclick="showTab('preview')">é¢„è§ˆ</div>
                    <div class="tab" onclick="showTab('properties')">properties.js</div>
                    <div class="tab" onclick="showTab('cities')">cities.js æ¡ç›®</div>
                </div>
                
                <div id="tab-preview" class="tab-content active">
                    <div id="preview-grid" class="preview-grid"></div>
                </div>
                
                <div id="tab-properties" class="tab-content">
                    <div id="output-properties" class="output-code">ç”Ÿæˆåæ˜¾ç¤º...</div>
                    <button class="btn-secondary" onclick="copyCode('properties')">ğŸ“‹ å¤åˆ¶</button>
                    <button class="btn-secondary" onclick="downloadCode()">ğŸ’¾ ä¸‹è½½</button>
                </div>
                
                <div id="tab-cities" class="tab-content">
                    <div id="output-cities" class="output-code">ç”Ÿæˆåæ˜¾ç¤º...</div>
                    <button class="btn-secondary" onclick="copyCode('cities')">ğŸ“‹ å¤åˆ¶</button>
                </div>
            </div>
        </div>
    </div>

<script>
// æ ‡å‡†å¤§å¯Œç¿é…ç½®
const STANDARD_CONFIG = {
    // è¡—é“ä½ç½® -> é¢œè‰²ç»„
    streetColors: {
        1: 'brown', 3: 'brown',
        6: 'lightblue', 8: 'lightblue', 9: 'lightblue',
        11: 'pink', 13: 'pink', 14: 'pink',
        16: 'orange', 18: 'orange', 19: 'orange',
        21: 'red', 23: 'red', 24: 'red',
        26: 'yellow', 27: 'yellow', 29: 'yellow',
        31: 'green', 32: 'green', 34: 'green',
        37: 'blue', 39: 'blue'
    },
    // ä»·æ ¼é…ç½®ï¼ˆæŒ‰ä½ç½®ï¼‰
    prices: {
        1: 60, 3: 60,
        6: 100, 8: 100, 9: 120,
        11: 140, 13: 140, 14: 160,
        16: 180, 18: 180, 19: 200,
        21: 220, 23: 220, 24: 240,
        26: 260, 27: 260, 29: 280,
        31: 300, 32: 300, 34: 320,
        37: 350, 39: 400
    },
    // ç§Ÿé‡‘é…ç½®ï¼ˆæŒ‰ä½ç½®ï¼‰[åŸºç¡€, 1æˆ¿, 2æˆ¿, 3æˆ¿, 4æˆ¿, é…’åº—]
    rents: {
        1: [2, 10, 30, 90, 160, 250],
        3: [4, 20, 60, 180, 320, 450],
        6: [6, 30, 90, 270, 400, 550],
        8: [6, 30, 90, 270, 400, 550],
        9: [8, 40, 100, 300, 450, 600],
        11: [10, 50, 150, 450, 625, 750],
        13: [10, 50, 150, 450, 625, 750],
        14: [12, 60, 180, 500, 700, 900],
        16: [14, 70, 200, 550, 750, 950],
        18: [14, 70, 200, 550, 750, 950],
        19: [16, 80, 220, 600, 800, 1000],
        21: [18, 90, 250, 700, 875, 1050],
        23: [18, 90, 250, 700, 875, 1050],
        24: [20, 100, 300, 750, 925, 1100],
        26: [22, 110, 330, 800, 975, 1150],
        27: [22, 110, 330, 800, 975, 1150],
        29: [24, 120, 360, 850, 1025, 1200],
        31: [26, 130, 390, 900, 1100, 1275],
        32: [26, 130, 390, 900, 1100, 1275],
        34: [28, 150, 450, 1000, 1200, 1400],
        37: [35, 175, 500, 1100, 1300, 1500],
        39: [50, 200, 600, 1400, 1700, 2000]
    },
    // æˆ¿å±‹æˆæœ¬
    houseCosts: {
        brown: 50, lightblue: 50,
        pink: 100, orange: 100,
        red: 150, yellow: 150,
        green: 200, blue: 200
    },
    // é“è·¯ä½ç½®
    railroads: [5, 15, 25, 35],
    // å…¬ç”¨äº‹ä¸šä½ç½®
    utilities: [12, 28]
};

function parseInput(input) {
    const lines = input.trim().split('\n');
    const properties = [];
    
    for (const line of lines) {
        const match = line.match(/^(\d+)\s*[\.ã€‚:ï¼š]\s*(.+)$/);
        if (match) {
            const position = parseInt(match[1]);
            const name = match[2].trim();
            properties.push({ position, name });
        }
    }
    
    return properties;
}

function generate() {
    const cityId = document.getElementById('cityId').value.trim() || 'custom';
    const cityName = document.getElementById('cityName').value.trim() || 'è‡ªå®šä¹‰åŸå¸‚';
    const cityFlag = document.getElementById('cityFlag').value.trim() || 'ğŸ™ï¸';
    const currency = document.getElementById('currency').value.trim() || '$';
    const input = document.getElementById('propertyInput').value;
    
    const properties = parseInput(input);
    
    if (properties.length === 0) {
        alert('è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªåœ°äº§ï¼');
        return;
    }
    
    // ç”Ÿæˆ properties.js ä»£ç 
    const propertiesCode = generatePropertiesCode(cityId, cityName, properties, currency);
    document.getElementById('output-properties').textContent = propertiesCode;
    
    // ç”Ÿæˆ cities.js æ¡ç›®
    const citiesCode = generateCitiesEntry(cityId, cityName, cityFlag, currency);
    document.getElementById('output-cities').textContent = citiesCode;
    
    // ç”Ÿæˆé¢„è§ˆ
    generatePreview(properties);
}

function generatePropertiesCode(cityId, cityName, properties, currency) {
    const varName = cityId.toUpperCase() + '_PROPERTIES';
    let code = `// ${cityName}ç‰ˆåœ°äº§æ•°æ®\n`;
    code += `const ${varName} = [\n`;
    
    // æŒ‰ä½ç½®æ’åº
    properties.sort((a, b) => a.position - b.position);
    
    // åˆ†ç»„ç”Ÿæˆ
    const colorGroups = {};
    
    for (const prop of properties) {
        const pos = prop.position;
        
        if (STANDARD_CONFIG.railroads.includes(pos)) {
            // é“è·¯
            code += `    { position: ${pos}, name: "${prop.name}", type: "RAILROAD", color: "railroad", price: 200, rent: [25, 50, 100, 200], mortgageValue: 100 },\n`;
        } else if (STANDARD_CONFIG.utilities.includes(pos)) {
            // å…¬ç”¨äº‹ä¸š
            code += `    { position: ${pos}, name: "${prop.name}", type: "UTILITY", color: "utility", price: 150, mortgageValue: 75 },\n`;
        } else if (STANDARD_CONFIG.streetColors[pos]) {
            // è¡—é“
            const color = STANDARD_CONFIG.streetColors[pos];
            const price = STANDARD_CONFIG.prices[pos];
            const rent = JSON.stringify(STANDARD_CONFIG.rents[pos]);
            const houseCost = STANDARD_CONFIG.houseCosts[color];
            const mortgageValue = Math.floor(price / 2);
            
            if (!colorGroups[color]) colorGroups[color] = [];
            colorGroups[color].push(pos);
            
            code += `    { position: ${pos}, name: "${prop.name}", type: "STREET", color: "${color}", price: ${price}, rent: ${rent}, houseCost: ${houseCost}, mortgageValue: ${mortgageValue} },\n`;
        }
    }
    
    code += `];\n\n`;
    
    // é¢œè‰²ç»„å®šä¹‰
    code += `// é¢œè‰²ç»„å®šä¹‰\n`;
    code += `const ${cityId.toUpperCase()}_COLOR_GROUPS = {\n`;
    for (const [color, positions] of Object.entries(colorGroups)) {
        code += `    ${color}: [${positions.join(', ')}],\n`;
    }
    code += `};\n\n`;
    
    // åŸå¸‚ä¿¡æ¯
    code += `// åŸå¸‚ä¿¡æ¯\n`;
    code += `const ${cityId.toUpperCase()}_INFO = {\n`;
    code += `    name: "${cityName}",\n`;
    code += `    nameEn: "${cityId}",\n`;
    code += `    currency: "${currency}",\n`;
    code += `    description: "${cityName}ç‰ˆå¤§å¯Œç¿"\n`;
    code += `};\n`;
    
    return code;
}

function generateCitiesEntry(cityId, cityName, flag, currency) {
    return `// åœ¨ cities.js çš„ CITIES å¯¹è±¡ä¸­æ·»åŠ ï¼š

"${cityId}": {
    name: "${cityName}",
    flag: "${flag}",
    currency: "${currency}"
},

// åœ¨ getCityProperties å‡½æ•°çš„ switch ä¸­æ·»åŠ ï¼š
case '${cityId}':
    return ${cityId.toUpperCase()}_PROPERTIES;

// åœ¨ getCityInfo å‡½æ•°çš„ switch ä¸­æ·»åŠ ï¼š
case '${cityId}':
    return ${cityId.toUpperCase()}_INFO;`;
}

function generatePreview(properties) {
    const grid = document.getElementById('preview-grid');
    const propMap = {};
    properties.forEach(p => propMap[p.position] = p);
    
    // 11x11 ç½‘æ ¼
    let html = '';
    const layout = [
        [20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30],
        [19, -1, -1, -1, -1, -1, -1, -1, -1, -1, 31],
        [18, -1, -1, -1, -1, -1, -1, -1, -1, -1, 32],
        [17, -1, -1, -1, -1, -1, -1, -1, -1, -1, 33],
        [16, -1, -1, -1, -1, -1, -1, -1, -1, -1, 34],
        [15, -1, -1, -1, -1, -1, -1, -1, -1, -1, 35],
        [14, -1, -1, -1, -1, -1, -1, -1, -1, -1, 36],
        [13, -1, -1, -1, -1, -1, -1, -1, -1, -1, 37],
        [12, -1, -1, -1, -1, -1, -1, -1, -1, -1, 38],
        [11, -1, -1, -1, -1, -1, -1, -1, -1, -1, 39],
        [10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
    ];
    
    for (const row of layout) {
        for (const pos of row) {
            if (pos === -1) {
                html += `<div class="preview-tile" style="background:transparent;"></div>`;
            } else if ([0, 10, 20, 30].includes(pos)) {
                const names = ['èµ·ç‚¹', 'ç›‘ç‹±', 'åœè½¦', 'å…¥ç‹±'];
                html += `<div class="preview-tile corner">${names[[0,10,20,30].indexOf(pos)]}</div>`;
            } else {
                const prop = propMap[pos];
                const color = STANDARD_CONFIG.streetColors[pos];
                const isRailroad = STANDARD_CONFIG.railroads.includes(pos);
                const isUtility = STANDARD_CONFIG.utilities.includes(pos);
                
                let colorBar = '';
                if (color) colorBar = `<div class="color-bar color-${color}"></div>`;
                else if (isRailroad) colorBar = `<div class="color-bar color-railroad"></div>`;
                else if (isUtility) colorBar = `<div class="color-bar color-utility"></div>`;
                
                const name = prop ? prop.name.slice(0, 4) : pos;
                html += `<div class="preview-tile">${colorBar}${name}</div>`;
            }
        }
    }
    
    grid.innerHTML = html;
}

function showTab(name) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    
    event.target.classList.add('active');
    document.getElementById('tab-' + name).classList.add('active');
}

function copyCode(type) {
    const el = document.getElementById('output-' + type);
    navigator.clipboard.writeText(el.textContent);
    alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
}

function downloadCode() {
    const code = document.getElementById('output-properties').textContent;
    const cityId = document.getElementById('cityId').value.trim() || 'custom';
    const blob = new Blob([code], { type: 'text/javascript' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = `${cityId}_properties.js`;
    a.click();
}

function loadExample() {
    document.getElementById('cityId').value = 'louisiana';
    document.getElementById('cityName').value = 'è·¯æ˜“æ–¯å®‰é‚£';
    document.getElementById('cityFlag').value = 'ğŸ‡ºğŸ‡¸';
    document.getElementById('currency').value = '$';
    document.getElementById('propertyInput').value = `1.å·´åé²æ—¥
3.æ–°å¥¥å°”è‰¯
5.æ–°å¥¥å°”è‰¯ç«™
6.æ°æ–é€Šå ‚åŒº
8.æ‹‰æ³•å¶
9.ä»€é‡Œå¤«æ³¢ç‰¹
11.äºšå†å±±å¾·é‡Œäºš
12.è·¯æ˜“æ–¯å®‰é‚£ç”µåŠ›
13.é—¨ç½—
14.åšè¥¿å°”åŸ
15.æ°å…‹é€Šç«™
16.æŸ¥å°”æ–¯æ¹–
18.æ³¢æ ¼å¢è¨
19.æ–°ä¼Šæ¯”åˆ©äºš
21.å“ˆè’™å¾·
22.èƒ¡é©¬
23.è’‚åšå¤š
24.è‚¯çº³
25.æ‹‰æ™®æ‹‰æ–¯ç«™
26.æ–¯è±å¾·å°”
27.ç§‘æ–‡é¡¿
28.è·¯æ˜“æ–¯å®‰é‚£æ°´åŠ¡
29.æ›¼å¾·ç»´å°”
31.æ¢…æ³°é‡Œ
32.æ ¼é›·ç‰¹çº³
33.å“ˆç»´
34.è‰¾æ–‡ä»£å°”
35.æ–°å¥¥å°”è‰¯å›½é™…æœºåœº
37.æ³•è¯­åŒº
39.èŠ±å›­åŒº`;
    
    generate();
}

// é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºç©ºé¢„è§ˆ
document.addEventListener('DOMContentLoaded', () => {
    generatePreview([]);
});
</script>
</body>
</html>
